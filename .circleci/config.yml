version: 2.1

jobs:
  build:
    resource_class: small
    docker:
      - image: ubuntu:22.04
    steps:
      - checkout
      - run: apt update
      - run: DEBIAN_FRONTEND=noninteractive TZ=Europe/Brussels apt install -y gcc g++ cmake make libsfml-dev git curl

      # Update CMake to the newest version (3.29+)
      - run: |
          CMAKE_VERSION=3.29.0
          curl -L https://github.com/Kitware/CMake/releases/download/v$CMAKE_VERSION/cmake-$CMAKE_VERSION-linux-x86_64.sh -o cmake-install.sh
          chmod +x cmake-install.sh
          ./cmake-install.sh --skip-license --prefix=/usr/local

      - run: mkdir -p build
      - run: cd build && cmake
      - run: cd build && make
      - run: cd build && make install